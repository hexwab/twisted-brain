MODE 1
VDU 23,1,0;0;0;0;
*LOAD LOGO
DIM Z%256
DATA 0,3,&C,&F,&30,&33,&3C,&3F,&C0,&C3,&CC,&CF,&F0,&F3,&FC,&FF
FOR A%=Z% TOZ%+240 STEP16
RESTORE
FOR B%=0 TO15
READ A%?B%
NEXT,
DATA0,2,3,4,5,6,7,8,10,11,13,14
Y%=130
N%=0
FOR L%=0 TO 15
IF L%=1 OR L%=9 OR L%=12 GOTO 400
A%=&3000+(Y%DIV 8)*640+(Y%MOD 8)
B%=&2000+(N%DIV 8)*640+(N%MOD 8)
FOR X%=0 TO 639 STEP 8
B%?X%=Z%?(A%?X%)
A%?X%=66
NEXT
N%=N%+1
400Y%=Y%+3
IF L%MOD 3=1 Y%=Y%+1
NEXT
MODE 0
C%=61
E%=C%*8
D%=(C%DIV4)*8
?&FE00=1:?&FE01=C%
Y%=0
FOR L%=0 TO 15
B%=&2000+(L%DIV 8)*640+(L%MOD 8)
A%=&3000+(Y%DIV 8)*E%+(Y%MOD 8)
FOR X%=0 TO E%-1 STEP 8
A%?X%=B%?(X%+D%)
NEXT
Y%=Y%+8
NEXT
*L.SHIFTST
X%=&30:Y%=&60:CALL!&2000
X%=&38:Y%=&61:CALL!&2000
X%=&40:Y%=&62:CALL!&2000
REM pack and save
*SAVE SHIFT3 6000+2E0
X%=0
IFGET
Y%=12
A%=12
REPEAT
CALL!&2004:REM test shifting
X%=12
UNTILGET=32
CLS
*L.SHIFT3
REM test unpacking
X%=&60:Y%=&30:CALL!&2002
X%=&61:Y%=&38:CALL!&2002
X%=&62:Y%=&40:CALL!&2002
END

Y%=96
FOR L%=0 TO 11
A%=&3000+(Y%DIV 8)*E%+(Y%MOD 8)
B%=&3000+(L%)*E%
FOR X%=E%-8 TO 0 STEP -8
R%=B%?X%
S%=B%?(X%-8)
A%?X%=((R%AND&F0)DIV 16)OR((S%AND15)*16)
NEXT
Y%=Y%+8
NEXT

REM*SAVE SHIFT 3000+5000
OSCLI "SAVE SHIFT2 3000+"+STR$~(C%*12*8*2)
